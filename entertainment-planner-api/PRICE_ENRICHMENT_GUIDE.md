# üí∞ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ–±–æ–≥–∞—â–µ–Ω–∏—é —Ü–µ–Ω

## –ü—Ä–æ–±–ª–µ–º–∞

–ò–∑ 1873 –º–µ—Å—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Ç–æ–ª—å–∫–æ 155 (8.3%) –∏–º–µ–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ü–µ–Ω–∞—Ö. –ü—Ä–∏—á–∏–Ω—ã:
1. **TimeOut Bangkok** –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ü–µ–Ω–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
2. **CSV-–∏–º–ø–æ—Ä—Ç—ã** –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç price_level
3. **Google Maps API** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∞ –±–∞–∑–∞ –æ–∂–∏–¥–∞–µ—Ç —á–∏—Å–ª–∞

## –†–µ—à–µ–Ω–∏–µ

### 1. –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω

–°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç `update_prices.py` –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è price_level:

```bash
# –û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—ã –¥–ª—è 100 –º–µ—Å—Ç
python update_prices.py --batch-size 100

# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
python update_prices.py --batch-size 50 --dry-run
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Ü–µ–Ω

–û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã –æ–±–æ–≥–∞—â–µ–Ω–∏—è –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏:
- `apps/places/commands/enrich_google.py`
- `apps/places/commands/enrich_bk_google.py`  
- `apps/places/adapters/enricher_adapter.py`

### 3. –ú–∞–ø–ø–∏–Ω–≥ —Ü–µ–Ω

Google Maps API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ —á–∏—Å–ª–∞:

```python
price_map = {
    "PRICE_LEVEL_FREE": 0,           # –ë–µ—Å–ø–ª–∞—Ç–Ω–æ
    "PRICE_LEVEL_INEXPENSIVE": 1,    # –ù–µ–¥–æ—Ä–æ–≥–æ (~100-300‡∏ø)
    "PRICE_LEVEL_MODERATE": 2,       # –£–º–µ—Ä–µ–Ω–Ω–æ (~300-800‡∏ø)
    "PRICE_LEVEL_EXPENSIVE": 3,      # –î–æ—Ä–æ–≥–æ (~800-1500‡∏ø)
    "PRICE_LEVEL_VERY_EXPENSIVE": 4  # –û—á–µ–Ω—å –¥–æ—Ä–æ–≥–æ (~1500‡∏ø+)
}
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è –Ω–æ–≤—ã—Ö –º–µ—Å—Ç

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –º–µ—Å—Ç —á–µ—Ä–µ–∑ Google Maps –æ–±–æ–≥–∞—â–µ–Ω–∏–µ —Ü–µ–Ω—ã –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è:

```bash
# –û–±–æ–≥–∞—â–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–µ—Å—Ç
python apps/places/commands/enrich_google.py --batch-size 20
```

### –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–µ—Å—Ç –±–µ–∑ —Ü–µ–Ω

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –º–µ—Å—Ç —Å Google Maps ID, –Ω–æ –±–µ–∑ —Ü–µ–Ω:

```bash
# –û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—ã –¥–ª—è –º–µ—Å—Ç —Å Google Maps ID
python update_prices.py --batch-size 200
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Ü–µ–Ω–∞–º:

```python
from apps.core.db import SessionLocal
from apps.places.models import Place

db = SessionLocal()
total = db.query(Place).count()
with_price = db.query(Place).filter(Place.price_level.isnot(None)).count()

print(f'–í—Å–µ–≥–æ –º–µ—Å—Ç: {total}')
print(f'–° —Ü–µ–Ω–∞–º–∏: {with_price} ({with_price/total*100:.1f}%)')
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- **–ë—ã–ª–æ**: 118 –º–µ—Å—Ç —Å —Ü–µ–Ω–∞–º–∏ (6.3%)
- **–°—Ç–∞–ª–æ**: 155+ –º–µ—Å—Ç —Å —Ü–µ–Ω–∞–º–∏ (8.3%+)
- **–î–æ–±–∞–≤–ª–µ–Ω–æ**: 37+ –Ω–æ–≤—ã—Ö —Ü–µ–Ω

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

–í—Å–µ –∫–æ–º–∞–Ω–¥—ã –æ–±–æ–≥–∞—â–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. ‚úÖ –ü–æ–ª—É—á–∞—é—Ç price_level –∏–∑ Google Maps API
2. ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç —Å—Ç—Ä–æ–∫–∏ –≤ —á–∏—Å–ª–∞
3. ‚úÖ –°–æ—Ö—Ä–∞–Ω—è—é—Ç –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
4. ‚úÖ –õ–æ–≥–∏—Ä—É—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –º–µ—Å—Ç–∞ –≤ Google Maps –Ω–µ –∏–º–µ—é—Ç price_level:
- –ú—É–∑–µ–∏ –∏ –≥–∞–ª–µ—Ä–µ–∏
- –ü–∞—Ä–∫–∏ –∏ —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ –ø–ª–æ—â–∞–¥–∫–∏
- –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ —É—á—Ä–µ–∂–¥–µ–Ω–∏—è
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –±–∞—Ä—ã –∏ –∫–ª—É–±—ã

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - Google –Ω–µ –≤—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ü–µ–Ω–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∑–∞–≤–µ–¥–µ–Ω–∏–π.
