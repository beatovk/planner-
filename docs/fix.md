1) API (публичные/маршрут)
Критические

✅ API-BUG-001 — Pydantic валидation crash, когда маршрут не найден (нет match_profile в ответе).
Путь: apps/places/services/route.py:406-412 (см. связанный PLACES-BUG-001)
Почему блокер: фронт не получит корректный JSON → карточки/маршрут не отрисуются.
ИСПРАВЛЕНО: Заменено поле "reason" на "match_profile" в debug объекте для соответствия схеме RouteDebug.

Средние

✅ API-VAL-001 — Валидация координат (диапазоны, NaN) в эндпоинтах, где считаются расстояния (по аналогии с поиском).
Путь: apps/api/routes/places.py:42-43 (+ применить то же для /api/routes)
Почему сейчас важно: некорректные lat/lng → падение/мусорные расстояния.
ИСПРАВЛЕНО: Добавлены custom validators в схемы Origin и Place для проверки на NaN и infinite значения координат.

2) Places (RouteService / расчёт расстояний)
Критические

✅ PLACES-BUG-001 — RouteService при отсутствии комбинаций возвращает debug без обязательного match_profile.
Путь: apps/places/services/route.py:406-412
Почему блокер: та же причина, что и API-BUG-001; ломает ответ маршрута.
ИСПРАВЛЕНО: Заменено поле "reason" на "match_profile" в debug объекте (исправлено вместе с API-BUG-001).

Средние

✅ PLACES-ARCH-001 — Нет централизованной обработки ошибок в RouteService.
Путь: apps/places/services/route.py:43-50
Почему сейчас важно: любая нетипичная ситуация (пустые координаты у места и т.п.) превращается в 500 вместо «корректного нуля» маршрута.
ИСПРАВЛЕНО: Добавлен try-catch блок в метод build_route для централизованной обработки ошибок. Теперь возвращается "корректный ноль" маршрута с debug информацией вместо 500 ошибки.

✅ PLACES-VAL-001 — Валидация lat/lng на уровне модели/сервиса (диапазоны; пропуски).
Путь: apps/places/models.py:19-20
Почему сейчас важно: маршруты/расстояния должны стабильно считать только по валидным точкам (остальные фильтровать).
ИСПРАВЛЕНО: Добавлены CheckConstraint для диапазонов координат, методы validate_coordinates() и filter_valid_coordinates() для проверки и фильтрации валидных координат.

3) Utils & Dependencies
Критические

✅ UTILS-BUG-001 — В requirements.txt отсутствует SQLAlchemy.
Путь: requirements.txt
Почему блокер: без этого API не поднимется → ни поиск, ни маршруты не заработают.
ИСПРАВЛЕНО: SQLAlchemy==2.0.43 уже присутствует в requirements.txt (строка 27).